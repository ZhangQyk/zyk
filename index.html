<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=1200,user-scalable=no" />
	<title>秋枫的博客</title>
	<style>
		html,body{height:100%;margin:0;color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;overflow:hidden;}
		.bg{position:fixed;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center;z-index:-1;}
		.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:0;}
		
		/* 电脑视图：Flex 居中，左右间距 6vw */
		.main{
		    position:absolute;
		    top:0;left:0;
		    width:100%;height:100%;
		    display:flex;
		    align-items:center;
		    justify-content:center;
		    gap:6vw;
		}
		.left{
		    max-width:700px;
		    max-height:70vh;
		    padding:2vh 2vw;
		    overflow-y:auto;
		    word-break:break-word;
		}
		.left h1{font-size:clamp(2rem,3vw,3rem);margin-bottom:.4em;text-shadow:0 2px 10px rgba(0,0,0,.5);}
		#hitokoto{font-size:clamp(1.1rem,1.6vw,1.5rem);}
		.quote{
		    font-size:clamp(1.6rem,2.4vw,2.4rem);
		    font-weight:600;
		    line-height:1.3;
		    color:#ffd;
		    text-shadow:0 2px 8px rgba(0,0,0,.6);
		}
		
		/* 时间胶囊样式 */
		.time-capsule {
		    margin-top: 30px;
		    padding: 20px;
		    background: rgba(0,0,0,.35);
		    border-radius: 12px;
		    backdrop-filter: blur(10px);
		}
		.time-capsule h3 {
		    margin-top: 0;
		    margin-bottom: 15px;
		    font-size: 1.2rem;
		    color: #ffd;
		    text-shadow: 0 1px 3px rgba(0,0,0,.5);
		}
		.time-item {
		    margin-bottom: 12px;
		}
		.time-item label {
		    display: block;
		    margin-bottom: 4px;
		    font-size: 0.9rem;
		    color: #ddd;
		}
		.progress-bar {
		    width: 100%;
		    height: 6px;
		    background: rgba(255,255,255,.2);
		    border-radius: 3px;
		    overflow: hidden;
		}
		.progress-fill {
		    height: 100%;
		    background: linear-gradient(90deg, #4facfe, #00f2fe);
		    border-radius: 3px;
		    transition: width 0.5s ease;
		}
		.time-info {
		    display: flex;
		    justify-content: space-between;
		    font-size: 0.8rem;
		    color: #bbb;
		    margin-top: 2px;
		}
		
		.right{
		    width:260px;
		    display:flex;
		    flex-direction:column;
		    align-items:center;
		    background:rgba(0,0,0,.35);
		    border-radius:12px;
		    padding:20px;
		}
		.player{display:flex;align-items:center;gap:12px;}
		.player button{background:none;border:0;color:#fff;font-size:32px;cursor:pointer;outline:none;}
		.progress{display:flex;align-items:center;gap:6px;width:100%;margin-top:10px;}
		.progress input[type=range]{flex:1;height:4px;background:#666;border-radius:2px;outline:none;cursor:pointer;}
		.progress span{font-size:14px;width:44px;text-align:center;}
		
		.bottom{
		    position:absolute;
		    left:50%;
		    bottom:30px;
		    transform:translateX(-50%);
		    display:flex;
		    gap:30px;
		}
		.bottom a{
		    padding:12px 28px;
		    border:1px solid #fff;
		    border-radius:25px;
		    text-decoration:none;
		    color:#fff;
		    font-size:16px;
		    transition:.3s;
		}
		.bottom a:hover{background:#fff;color:#111;}
	</style>
</head>

<body>
	<div class="bg" id="bg"></div>
	<div class="overlay"></div>

	<div class="main">
		<!-- 左侧文字区（可滚动） -->
		<div class="left">
			<h1>秋枫Mod</h1>
			<p id="hitokoto">正在加载一言…</p>
			<div class="quote">
				哪有顷刻之间的心灰意冷，有的，只是日积月累的看透罢了。
			</div>

			<!-- 时间胶囊 -->
			<div class="time-capsule">
				<h3>时间胶囊</h3>

				<div class="time-item">
					<label>今日进度</label>
					<div class="progress-bar">
						<div class="progress-fill" id="dayProgress"></div>
					</div>
					<div class="time-info">
						<span id="dayElapsed">已度过 0%</span>
						<span id="dayRemaining">还剩 00:00:00</span>
					</div>
				</div>

				<div class="time-item">
					<label>本月进度</label>
					<div class="progress-bar">
						<div class="progress-fill" id="monthProgress"></div>
					</div>
					<div class="time-info">
						<span id="monthElapsed">已度过 0%</span>
						<span id="monthRemaining">还剩 0 天</span>
					</div>
				</div>

				<div class="time-item">
					<label>今年进度</label>
					<div class="progress-bar">
						<div class="progress-fill" id="yearProgress"></div>
					</div>
					<div class="time-info">
						<span id="yearElapsed">已度过 0%</span>
						<span id="yearRemaining">还剩 0 天</span>
					</div>
				</div>
			</div>
		</div>

		<!-- 右侧播放器 -->
		<div class="right">
			<div class="player">
				<button id="prevBtn" title="上一首">⏮</button>
				<button id="playBtn" title="播放/暂停">▶</button>
				<button id="nextBtn" title="下一首">⏭</button>
			</div>
			<div class="progress">
				<span id="currentTime">0:00</span>
				<input type="range" id="progressBar" value="0" step="0.1" min="0" max="100">
				<span id="duration">0:00</span>
			</div>
		</div>
	</div>

	<div class="bottom">
		<a href="https://space.bilibili.com/3546628455664136" target="_blank" rel="noopener">哔哩哔哩</a>
		<a href="https://bbs.binmt.cc/home.php?mod=space&uid=140217&do=profile" target="_blank" rel="noopener">MT论坛</a>
		<a href="https://github.com/ZhangQyk" target="_blank" rel="noopener">GitHub</a>
			<a href="https://qm.qq.com/cgi-bin/qm/qr?k=Cgn8JDSoW7AC96H-zocTiakdOwsw96vR" target="_blank" rel="noopener">QQ</a>
	</div>

	<audio id="audio" preload="metadata"></audio>

	<script>
		/* 背景直接加载 */
		const bgEl = document.getElementById('bg');
		(new Image()).src = 'https://imgapi.xl0408.top/';
		bgEl.style.backgroundImage = `url('https://imgapi.xl0408.top/')`;
		
		/* 一言 */
		const hitEl = document.getElementById('hitokoto');
		const defaultHit = '愿你走出半生，归来仍是少年。';
		async function loadHitokoto() {
		    try {
		        const d = await (await fetch('https://international.v1.hitokoto.cn/?encode=json')).json();
		        hitEl.innerHTML = `${d.hitokoto}<br><small>—— ${d.from_who || ''}《${d.from}》</small>`;
		    } catch {
		        hitEl.innerHTML = defaultHit;
		    }
		}
		loadHitokoto();
		setInterval(loadHitokoto, 10000);
		
		/* 播放器 */
		const audio = document.getElementById('audio');
		const playBtn = document.getElementById('playBtn');
		const bar = document.getElementById('progressBar');
		const curTime = document.getElementById('currentTime');
		const durTime = document.getElementById('duration');
		
		async function loadSong() {
		    try {
		        const d = await (await fetch('https://api.uomg.com/api/rand.music?format=json')).json();
		        audio.src = d.data.url;
		        audio.play().catch(() => {});
		    } catch {
		        setTimeout(loadSong, 1000);
		    }
		}
		function format(t) { const m = Math.floor(t / 60), s = Math.floor(t % 60).toString().padStart(2, '0'); return `${m}:${s}`; }
		function togglePlay() { audio.paused ? (audio.play(), playBtn.textContent = '⏸') : (audio.pause(), playBtn.textContent = '▶'); }
		function updateBar() { bar.value = (audio.currentTime / audio.duration) * 100 || 0; curTime.textContent = format(audio.currentTime); }
		bar.addEventListener('input', () => audio.currentTime = (bar.value / 100) * audio.duration);
		audio.addEventListener('loadedmetadata', () => durTime.textContent = format(audio.duration));
		audio.addEventListener('timeupdate', updateBar);
		audio.addEventListener('ended', loadSong);
		
		playBtn.onclick = togglePlay;
		loadSong();
		
		/* 时间胶囊 */
		function updateTimeCapsule() {
		    const now = new Date();
		    const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());
		    const endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
		    const totalDayMs = endOfDay - startOfDay;
		    const elapsedDayMs = now - startOfDay;
		    const dayPercent = (elapsedDayMs / totalDayMs) * 100;
		    const remainingDayMs = totalDayMs - elapsedDayMs;
		
		    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);
		    const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
		    const totalMonthMs = endOfMonth - startOfMonth;
		    const elapsedMonthMs = now - startOfMonth;
		    const monthPercent = (elapsedMonthMs / totalMonthMs) * 100;
		    const remainingMonthDays = Math.ceil((endOfMonth - now) / (1000 * 60 * 60 * 24));
		
		    const startOfYear = new Date(now.getFullYear(), 0, 1);
		    const endOfYear = new Date(now.getFullYear() + 1, 0, 1);
		    const totalYearMs = endOfYear - startOfYear;
		    const elapsedYearMs = now - startOfYear;
		    const yearPercent = (elapsedYearMs / totalYearMs) * 100;
		    const remainingYearDays = Math.ceil((endOfYear - now) / (1000 * 60 * 60 * 24));
		
		    // 更新进度条和文字
		    document.getElementById('dayProgress').style.width = dayPercent.toFixed(2) + '%';
		    document.getElementById('dayElapsed').textContent = `已度过 ${dayPercent.toFixed(2)}%`;
		    document.getElementById('dayRemaining').textContent = `还剩 ${formatTime(remainingDayMs)}`;
		
		    document.getElementById('monthProgress').style.width = monthPercent.toFixed(2) + '%';
		    document.getElementById('monthElapsed').textContent = `已度过 ${monthPercent.toFixed(2)}%`;
		    document.getElementById('monthRemaining').textContent = `还剩 ${remainingMonthDays} 天`;
		
		    document.getElementById('yearProgress').style.width = yearPercent.toFixed(2) + '%';
		    document.getElementById('yearElapsed').textContent = `已度过 ${yearPercent.toFixed(2)}%`;
		    document.getElementById('yearRemaining').textContent = `还剩 ${remainingYearDays} 天`;
		}
		
		function formatTime(ms) {
		    const totalSeconds = Math.floor(ms / 1000);
		    const hours = Math.floor(totalSeconds / 3600).toString().padStart(2, '0');
		    const minutes = Math.floor((totalSeconds % 3600) / 60).toString().padStart(2, '0');
		    const seconds = (totalSeconds % 60).toString().padStart(2, '0');
		    return `${hours}:${minutes}:${seconds}`;
		}
		
		// 初始化并每秒更新一次
		updateTimeCapsule();
		setInterval(updateTimeCapsule, 1000);
	</script>
</body>

</html>
